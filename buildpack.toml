# Copyright 2018-2021 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

api = "0.6"

[buildpack]
id          = "paketo-community/rust-dist"
name        = "Rust Distribution Buildpack"
version     = "{{.version}}"
homepage    = "https://github.com/paketo-community/rust-dist"
description = "A Cloud Native Buildpack that provides the Rust language build tools."
keywords    = ["rust", "rustc", "cargo", "tools"]

[[buildpack.licenses]]
type = "Apache-2.0"
uri  = "https://github.com/paketo-community/rust-dist/blob/main/LICENSE"

[[stacks]]
id = "io.buildpacks.stacks.bionic"

[[stacks]]
id = "io.paketo.stacks.tiny"

[[stacks]]
id = "*"

[[metadata.configurations]]
name = "BP_RUST_VERSION"
description = "the Rust version"
default = "1.*"
build = true

[[metadata.dependencies]]
id = "rust"
name = "Rust"
version = "1.55.0"
sha256 = "8c32495663607d41d7f650c674a013b4cb59b84dbdcb94052581efb95e95cbb6"
uri = "https://deps.paketo.io/rust/rust_1.55.0_linux_noarch_bionic_8c324956.tgz"
stacks = ["io.buildpacks.stacks.bionic", "io.paketo.stacks.tiny", "*"]
source = "https://static.rust-lang.org/dist/rustc-1.55.0-src.tar.gz"
source_sha256 = "b2379ac710f5f876ee3c3e03122fe33098d6765d371cac6c31b1b6fc8e43821e"

[[metadata.dependencies.licenses]]
type = "Apache-2.0"
uri  = "https://github.com/rust-lang/rust/blob/master/LICENSE-APACHE"

[[metadata.dependencies.licenses]]
type = "MIT"
uri  = "https://github.com/rust-lang/rust/blob/master/LICENSE-MIT"

[[metadata.dependencies]]
id = "rust"
name = "Rust"
version = "1.54.0"
sha256 = "63847be67cfa9f468279b6750d2a31beb6faf19c2eb1cdd6e0c9bc20b8ef0b54"
uri = "https://deps.paketo.io/rust/rust_1.54.0_linux_noarch_bionic_63847be6.tgz"
stacks = ["io.buildpacks.stacks.bionic", "io.paketo.stacks.tiny", "*"]
source = "https://static.rust-lang.org/dist/rustc-1.54.0-src.tar.gz"
source_sha256 = "ac8511633e9b5a65ad030a1a2e5bdaa841fdfe3132f2baaa52cc04e71c6c6976"

[[metadata.dependencies.licenses]]
type = "Apache-2.0"
uri  = "https://github.com/rust-lang/rust/blob/master/LICENSE-APACHE"

[[metadata.dependencies.licenses]]
type = "MIT"
uri  = "https://github.com/rust-lang/rust/blob/master/LICENSE-MIT"

[metadata]
pre-package   = "scripts/build.sh"
include-files = [
  "LICENSE",
  "NOTICE",
  "README.md",
  "bin/build",
  "bin/detect",
  "bin/main",
  "buildpack.toml",
]

