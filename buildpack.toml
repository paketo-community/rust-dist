api = "0.4"

[buildpack]
  id = "paketo-community/rust-dist"
  name = "Rust Distribution Buildpack"
  homepage = "https://github.com/paketo-community/rust-dist"

[[stacks]]
  id = "io.paketo.stacks.tiny"

[[stacks]]
  id = "io.buildpacks.stacks.bionic"

[metadata]
  include-files = ["bin/run", "bin/build", "bin/detect", "buildpack.toml"]
  pre-package = "./scripts/build.sh"

  [[metadata.configurations]]
    name = "BP_RUST_VERSION"
    description = "the Rust version"
    default = "1.*"
    build = true

  [[metadata.dependencies]]
    id = "rust"
    name = "Rust"
    version = "1.52.1"
    sha256 = "36c53fc4a300a9fa18bf8095b7073273d308e222b04cc4bae213265f5dc4c75f"
    uri = "https://deps.paketo.io/rust/rust_1.52.1_linux_noarch_bionic_36c53fc4.tgz"
    stacks = ["io.buildpacks.stacks.bionic", "io.paketo.stacks.tiny"]
    source = "https://static.rust-lang.org/dist/rustc-1.52.1-src.tar.gz"
    source_sha256 = "3a6f23a26d0e8f87abbfbf32c5cd7daa0c0b71d0986abefc56b9a5fbfbd0bf98"

    [[metadata.dependencies.licenses]]
      type = "Apache-2.0"
      uri = "http://www.apache.org/licenses/LICENSE-2.0"

    [[metadata.dependencies.licenses]]
      type = "MIT"
      uri = "https://opensource.org/licenses/MIT"

  [[metadata.dependencies]]
    id = "rust"
    name = "Rust"
    version = "1.51.0"
    sha256 = "d8742ebfdaa7eba9c577b5f6cf0a0883fb52db09f66b73ac0afc3eaa536ce06d"
    uri = "https://deps.paketo.io/rust/rust_1.51.0_linux_noarch_bionic_d8742ebf.tgz"
    stacks = ["io.buildpacks.stacks.bionic", "io.paketo.stacks.tiny"]
    source = "https://static.rust-lang.org/dist/rustc-1.51.0-src.tar.gz"
    source_sha256 = "7a6b9bafc8b3d81bbc566e7c0d1f17c9f499fd22b95142f7ea3a8e4d1f9eb847"

    [[metadata.dependencies.licenses]]
      type = "Apache-2.0"
      uri = "http://www.apache.org/licenses/LICENSE-2.0"

    [[metadata.dependencies.licenses]]
      type = "MIT"
      uri = "https://opensource.org/licenses/MIT"
